<!doctype html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
  </head>
  <body class="mixpanel-platform-body">
    <script>
      MP.api.ready(function() {
        var endpoint = '/api/2.0/segmentation/multiseg';
        var event = 'App Open';
        var params = {
          'type': 'general',
          'inner': 'properties["$city"]',
          'outer': 'properties["Campaign Source"]',
          'event': event,
          'to': moment(),
          'from': moment().subtract(10, 'days')
        }
        var query = MP.api.query(endpoint, params);
        
        $.when(query).done(function(obj){
            console.log(obj);
            var series = obj.data.series;
            var data = obj.data.values;
            
            _.each(_.keys(data), function(key){
                console.log(data[key]);
            });
            
        });
        
      });
    </script>
  </body>
</html>
